# Frontend: Internationalization (i18n)

<!-- AUTO-GENERATED: START -->

## Stack

- **Library:** next-intl
- **Location:** `frontend/src/i18n/`
- **Messages:** `frontend/src/i18n/messages/`

## Configuration

**File:** `frontend/src/i18n/request.ts`

```typescript
import { getRequestConfig } from 'next-intl/server';

export default getRequestConfig(async ({ locale }) => ({
  messages: (await import(`./messages/${locale}.json`)).default,
}));
```

**File:** `frontend/next.config.ts`

```typescript
import createNextIntlPlugin from 'next-intl/plugin';

const withNextIntl = createNextIntlPlugin('./src/i18n/request.ts');

export default withNextIntl({
  // ... other Next.js config
});
```

## Message Files

**File:** `frontend/src/i18n/messages/en.json`

```json
{
  "common": {
    "save": "Save",
    "cancel": "Cancel",
    "delete": "Delete",
    "edit": "Edit",
    "loading": "Loading...",
    "error": "An error occurred"
  },
  "auth": {
    "login": "Login",
    "logout": "Logout",
    "register": "Register",
    "email": "Email",
    "password": "Password",
    "forgotPassword": "Forgot password?",
    "rememberMe": "Remember me",
    "loginSuccess": "Logged in successfully",
    "loginError": "Invalid credentials"
  },
  "users": {
    "title": "Users",
    "createUser": "Create User",
    "editUser": "Edit User",
    "deleteUser": "Delete User",
    "firstName": "First Name",
    "lastName": "Last Name",
    "role": "Role",
    "status": "Status",
    "actions": "Actions"
  },
  "validation": {
    "required": "This field is required",
    "emailInvalid": "Invalid email address",
    "passwordMin": "Password must be at least {min} characters",
    "passwordMatch": "Passwords must match"
  }
}
```

**File:** `frontend/src/i18n/messages/es.json`

```json
{
  "common": {
    "save": "Guardar",
    "cancel": "Cancelar",
    "delete": "Eliminar",
    "edit": "Editar",
    "loading": "Cargando...",
    "error": "Ocurrió un error"
  },
  "auth": {
    "login": "Iniciar sesión",
    "logout": "Cerrar sesión",
    "register": "Registrarse",
    "email": "Correo electrónico",
    "password": "Contraseña",
    "forgotPassword": "¿Olvidaste tu contraseña?",
    "rememberMe": "Recuérdame",
    "loginSuccess": "Sesión iniciada correctamente",
    "loginError": "Credenciales inválidas"
  },
  "users": {
    "title": "Usuarios",
    "createUser": "Crear Usuario",
    "editUser": "Editar Usuario",
    "deleteUser": "Eliminar Usuario",
    "firstName": "Nombre",
    "lastName": "Apellido",
    "role": "Rol",
    "status": "Estado",
    "actions": "Acciones"
  },
  "validation": {
    "required": "Este campo es obligatorio",
    "emailInvalid": "Correo electrónico inválido",
    "passwordMin": "La contraseña debe tener al menos {min} caracteres",
    "passwordMatch": "Las contraseñas deben coincidir"
  }
}
```

## Routing Setup

**File:** `frontend/src/app/[locale]/layout.tsx`

```typescript
import { NextIntlClientProvider } from 'next-intl';
import { getMessages } from 'next-intl/server';

export default async function LocaleLayout({
  children,
  params: { locale },
}: {
  children: React.ReactNode;
  params: { locale: string };
}) {
  const messages = await getMessages();

  return (
    <html lang={locale}>
      <body>
        <NextIntlClientProvider messages={messages}>
          {children}
        </NextIntlClientProvider>
      </body>
    </html>
  );
}
```

## Usage in Components

### Server Components

```typescript
import { useTranslations } from 'next-intl';

export default function HomePage() {
  const t = useTranslations('common');

  return (
    <div>
      <h1>{t('welcome')}</h1>
      <p>{t('description')}</p>
    </div>
  );
}
```

### Client Components

```typescript
'use client';

import { useTranslations } from 'next-intl';

export function LoginForm() {
  const t = useTranslations('auth');

  return (
    <form>
      <label>{t('email')}</label>
      <input type="email" />

      <label>{t('password')}</label>
      <input type="password" />

      <button>{t('login')}</button>
    </form>
  );
}
```

### With Parameters

```typescript
const t = useTranslations('validation');

// Message: "Password must be at least {min} characters"
<p>{t('passwordMin', { min: 8 })}</p>

// Multiple parameters
<p>{t('greeting', { name: 'John', time: 'morning' })}</p>
```

### Pluralization

**Messages:**
```json
{
  "items": {
    "count": {
      "zero": "No items",
      "one": "1 item",
      "other": "{count} items"
    }
  }
}
```

**Usage:**
```typescript
const t = useTranslations('items');

<p>{t('count', { count: 0 })}</p>  // "No items"
<p>{t('count', { count: 1 })}</p>  // "1 item"
<p>{t('count', { count: 5 })}</p>  // "5 items"
```

### Rich Text

**Messages:**
```json
{
  "terms": "I agree to the <link>terms and conditions</link>"
}
```

**Usage:**
```typescript
import { useTranslations } from 'next-intl';

const t = useTranslations();

<p>
  {t.rich('terms', {
    link: (chunks) => (
      <a href="/terms" className="underline">
        {chunks}
      </a>
    ),
  })}
</p>
```

## Language Switcher

```typescript
'use client';

import { useLocale } from 'next-intl';
import { useRouter, usePathname } from 'next/navigation';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/shared/components/ui/select';

export function LanguageSwitcher() {
  const locale = useLocale();
  const router = useRouter();
  const pathname = usePathname();

  const changeLanguage = (newLocale: string) => {
    // Remove current locale from pathname
    const pathWithoutLocale = pathname.replace(`/${locale}`, '');

    // Navigate to new locale
    router.push(`/${newLocale}${pathWithoutLocale}`);
  };

  return (
    <Select value={locale} onValueChange={changeLanguage}>
      <SelectTrigger className="w-[120px]">
        <SelectValue />
      </SelectTrigger>
      <SelectContent>
        <SelectItem value="en">English</SelectItem>
        <SelectItem value="es">Español</SelectItem>
        <SelectItem value="fr">Français</SelectItem>
      </SelectContent>
    </Select>
  );
}
```

## Date & Time Formatting

```typescript
import { useFormatter } from 'next-intl';

export function EventDate({ date }: { date: Date }) {
  const format = useFormatter();

  return (
    <div>
      {/* Default format */}
      <p>{format.dateTime(date)}</p>

      {/* Custom format */}
      <p>{format.dateTime(date, {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
      })}</p>

      {/* Relative time */}
      <p>{format.relativeTime(date)}</p>
    </div>
  );
}
```

## Number Formatting

```typescript
import { useFormatter } from 'next-intl';

export function Price({ amount }: { amount: number }) {
  const format = useFormatter();

  return (
    <div>
      {/* Currency */}
      <p>{format.number(amount, { style: 'currency', currency: 'USD' })}</p>

      {/* Percentage */}
      <p>{format.number(0.15, { style: 'percent' })}</p>

      {/* Compact notation */}
      <p>{format.number(1500000, { notation: 'compact' })}</p>
    </div>
  );
}
```

## Type-Safe Messages

**File:** `frontend/src/i18n/types.ts`

```typescript
import type en from './messages/en.json';

type Messages = typeof en;

declare global {
  interface IntlMessages extends Messages {}
}
```

**Usage:**
```typescript
// TypeScript will now autocomplete and validate translation keys
const t = useTranslations('auth');
t('login'); // ✅ Valid
t('invalid'); // ❌ TypeScript error
```

## Validation Messages

```typescript
import { z } from 'zod';
import { useTranslations } from 'next-intl';

export function useLoginSchema() {
  const t = useTranslations('validation');

  return z.object({
    email: z.string().email(t('emailInvalid')),
    password: z.string().min(8, t('passwordMin', { min: 8 })),
  });
}
```

## Toast Messages

```typescript
import { toast } from 'sonner';
import { useTranslations } from 'next-intl';

export function useNotifications() {
  const t = useTranslations('notifications');

  return {
    success: (key: string) => toast.success(t(key)),
    error: (key: string) => toast.error(t(key)),
  };
}

// Usage
function MyComponent() {
  const notify = useNotifications();

  const handleSave = () => {
    notify.success('saveSuccess');
  };
}
```

## Best Practices

### ✅ DO

- Organize messages by feature/domain
- Use nested keys for organization
- Provide all translations from the start
- Use parameters for dynamic content
- Keep messages in JSON files
- Use type-safe message keys
- Test with different locales
- Format dates/numbers with locale

### ❌ DON'T

- Hardcode text in components
- Mix languages in one file
- Concatenate translated strings
- Use translation keys in URLs
- Forget to handle plurals
- Skip locale in routing
- Duplicate translation logic

## Adding a New Language

1. **Create message file:**
   ```bash
   cp src/i18n/messages/en.json src/i18n/messages/de.json
   ```

2. **Translate messages:**
   Edit `de.json` with German translations

3. **Update language switcher:**
   Add `<SelectItem value="de">Deutsch</SelectItem>`

4. **Test:**
   Navigate to `/de/...` to verify

<!-- AUTO-GENERATED: END -->
